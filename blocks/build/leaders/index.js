(()=>{"use strict";var e,s={48:()=>{const e=window.wp.blocks,s=window.wp.element,l=window.wp.blockEditor,r=window.wp.components,t=window.wp.i18n;function a(e){let s=new URL(e);return s.protocol=window.location.protocol,s.host=window.location.hostname,s.href}function o(e,s){setTimeout((()=>{const l=Array.from(e.current.getElementsByClassName(s)),r=Math.max(...l.map((e=>e.offsetHeight)));l.forEach((e=>{e.style.height=`${r}px`}))}))}const n=window.ReactJSXRuntime,i=JSON.parse('{"UU":"myclub-groups/leaders"}');(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:i}){const[c,d]=(0,s.useState)({members:[],leaders:[],loaded:!1}),[m,u]=(0,s.useState)([]),[p,h]=(0,s.useState)((0,t.__)("Leaders","myclub-groups"));let g;const{apiFetch:b}=wp,f=(0,s.useRef)(null),v=(0,s.useRef)(null),_={label:(0,t.__)("Select a group","myclub-groups"),value:""},y={role:(0,t.__)("Role","myclub-groups"),age:(0,t.__)("Age","myclub-groups"),email:(0,t.__)("E-mail","myclub-groups"),phone:(0,t.__)("Phone","myclub-groups")};return(0,s.useEffect)((()=>{d({...c,loaded:!1}),e.post_id?b({path:`/myclub/v1/groups/${e.post_id}`}).then((e=>{const s=JSON.parse(e.members);d({...s,loaded:!0})})):d({members:[],leaders:[],loaded:!0})}),[e.post_id]),(0,s.useEffect)((()=>{setTimeout((()=>{v.current&&(o(v,"leader-picture"),o(v,"leader-name"))}),100)}),[c]),(0,s.useEffect)((()=>{b({path:"/myclub/v1/options"}).then((e=>{h(e.myclub_groups_leaders_title)})),function(e,s){const{apiFetch:l}=wp;l({path:"/myclub/v1/groups"}).then((l=>{const r=l.map((e=>({label:e.title,value:e.id})));r.unshift(s),e(r)}))}(u,_)}),[]),g=c&&c.members&&c.members.length?(0,n.jsxs)("div",{className:"myclub-groups-leaders-list",children:[(0,n.jsxs)("div",{className:"myclub-groups-leaders-container",children:[(0,n.jsx)("h3",{className:"myclub-groups-header",children:p}),(0,n.jsx)("div",{ref:v,className:"leaders-list",children:c.leaders.slice(0,4).map((e=>(e.name=e.name.replaceAll("u0022",'"'),e.role&&(e.role=e.role.replaceAll("u0022",'"')),(0,n.jsxs)("div",{className:"leader",onClick:()=>function(e,s,l){if(e.current){const r=e.current.getElementsByClassName("image")[0],t=e.current.getElementsByClassName("information")[0];let o='<div class="name">'+s.name+"</div>";r.innerHTML='<img src="'+a(s.member_image.url)+'" alt="'+s.name+'" />',(s.role||s.phone||s.email||s.age)&&(o+="<table>",s.role&&(o+=`<tr><th>${l.role}</th><td>${s.role}</td></tr>`),s.age&&(o+=`<tr><th>${l.age}</th><td>${s.age}</td></tr>`),s.email&&(o+=`<tr><th>${l.email}</th><td><a href="mailto:${s.email}">${s.email}</a></td></tr>`),s.phone&&(o+=`<tr><th>${l.phone}</th><td><a href="tel:${s.phone}">${s.phone}</a></td></tr>`),o+="</table>"),t.innerHTML=o,e.current.classList.add("modal-open")}}(f,e,y),children:[(0,n.jsx)("div",{className:"leader-picture",children:e.member_image&&(0,n.jsx)("img",{src:a(e.member_image.url),alt:e.name})}),(0,n.jsxs)("div",{className:"leader-name",children:[e.name,(0,n.jsx)("div",{className:"leader-role",children:e.role})]})]}))))})]}),(0,n.jsx)("div",{className:"leader-modal",ref:f,children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("span",{className:"close",onClick:()=>function(e){e.current&&e.current.classList.remove("modal-open")}(f),children:"Ã—"}),(0,n.jsxs)("div",{className:"modal-body",children:[(0,n.jsx)("div",{className:"image"}),(0,n.jsx)("div",{className:"information"})]})]})})]}):(0,n.jsx)("div",{children:(0,t.__)("No groups with leaders selected","myclub-groups")}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.InspectorControls,{children:(0,n.jsx)(r.PanelBody,{title:(0,t.__)("Content settings","myclub-groups"),children:(0,n.jsx)(r.PanelRow,{children:m.length?(0,n.jsx)(r.SelectControl,{label:(0,t.__)("Group","myclub-groups"),value:e.post_id,options:m,onChange:e=>{i({post_id:e})}}):(0,n.jsx)(r.Spinner,{})})})}),(0,n.jsxs)("div",{...(0,l.useBlockProps)(),children:[e.post_id&&!c.loaded&&(0,n.jsx)(r.Spinner,{}),(c.loaded||!e.post_id)&&g]})]})}})}},l={};function r(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return s[e](a,a.exports,r),a.exports}r.m=s,e=[],r.O=(s,l,t,a)=>{if(!l){var o=1/0;for(d=0;d<e.length;d++){for(var[l,t,a]=e[d],n=!0,i=0;i<l.length;i++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](l[i])))?l.splice(i--,1):(n=!1,a<o&&(o=a));if(n){e.splice(d--,1);var c=t();void 0!==c&&(s=c)}}return s}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[l,t,a]},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={702:0,74:0};r.O.j=s=>0===e[s];var s=(s,l)=>{var t,a,[o,n,i]=l,c=0;if(o.some((s=>0!==e[s]))){for(t in n)r.o(n,t)&&(r.m[t]=n[t]);if(i)var d=i(r)}for(s&&s(l);c<o.length;c++)a=o[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},l=globalThis.webpackChunkmyclub_groups=globalThis.webpackChunkmyclub_groups||[];l.forEach(s.bind(null,0)),l.push=s.bind(null,l.push.bind(l))})();var t=r.O(void 0,[74],(()=>r(48)));t=r.O(t)})();