(()=>{"use strict";var e,l={48:()=>{const e=window.wp.blocks,l=window.wp.element,s=window.wp.blockEditor,t=window.wp.components,r=window.wp.i18n;function a(e){let l=new URL(e);return l.protocol=window.location.protocol,l.host=window.location.hostname,l.href}function o(e,l){setTimeout((()=>{const s=Array.from(e.current.getElementsByClassName(l)),t=Math.max(...s.map((e=>e.offsetHeight)));s.forEach((e=>{e.style.height=`${t}px`}))}))}const n=window.ReactJSXRuntime,i=JSON.parse('{"UU":"myclub-groups/leaders"}');(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:i}){const[c,d]=(0,l.useState)({leaders:[],loaded:!1}),[u,m]=(0,l.useState)([]),[p,h]=(0,l.useState)((0,r.__)("Leaders","myclub-groups"));let g;const{apiFetch:f}=wp,v=(0,l.useRef)(null),_=(0,l.useRef)(null),b={label:(0,r.__)("Select a group","myclub-groups"),value:""},y={role:(0,r.__)("Role","myclub-groups"),age:(0,r.__)("Age","myclub-groups"),email:(0,r.__)("E-mail","myclub-groups"),phone:(0,r.__)("Phone","myclub-groups")};return(0,l.useEffect)((()=>{d({...c,loaded:!1}),e.post_id?f({path:`/myclub/v1/groups/${e.post_id}`}).then((e=>{d({leaders:JSON.parse(e.leaders),loaded:!0})})):d({leaders:[],loaded:!0})}),[e.post_id]),(0,l.useEffect)((()=>{setTimeout((()=>{_.current&&(o(_,"leader-picture"),o(_,"leader-name"))}),100)}),[c]),(0,l.useEffect)((()=>{f({path:"/myclub/v1/options"}).then((e=>{h(e.myclub_groups_leaders_title)})),function(e,l){const{apiFetch:s}=wp;s({path:"/myclub/v1/groups"}).then((s=>{const t=s.map((e=>({label:e.title,value:e.id})));t.unshift(l),e(t)}))}(m,b)}),[]),g=c&&c.leaders&&c.leaders.length?(0,n.jsxs)("div",{className:"myclub-groups-leaders-list",children:[(0,n.jsxs)("div",{className:"myclub-groups-leaders-container",children:[(0,n.jsx)("h3",{className:"myclub-groups-header",children:p}),(0,n.jsx)("div",{ref:_,className:"leaders-list",children:c.leaders.slice(0,4).map((e=>(e.name=e.name.replaceAll("u0022",'"'),e.role&&(e.role=e.role.replaceAll("u0022",'"')),(0,n.jsxs)("div",{className:"leader",onClick:()=>function(e,l,s){if(e.current){const t=e.current.getElementsByClassName("image")[0],r=e.current.getElementsByClassName("information")[0];let o='<div class="name">'+l.name+"</div>";l.image_id&&(t.innerHTML='<img src="'+a(l.image_url)+'" alt="'+l.name+'" />'),(l.role||l.phone||l.email||l.age||l.dynamic_fields&&l.dynamic_fields.length)&&(o+="<table>",l.role&&(o+=`<tr><th>${s.role}</th><td>${l.role}</td></tr>`),l.age&&(o+=`<tr><th>${s.age}</th><td>${l.age}</td></tr>`),l.email&&(o+=`<tr><th>${s.email}</th><td><a href="mailto:${l.email}">${l.email}</a></td></tr>`),l.phone&&(o+=`<tr><th>${s.phone}</th><td><a href="tel:${l.phone}">${l.phone}</a></td></tr>`),l.dynamic_fields&&l.dynamic_fields.length&&l.dynamic_fields.forEach((e=>{o+=`<tr><th>${e.name}</th><td>${e.value.replaceAll("u0022",'"')}</td></tr>`})),o+="</table>"),r.innerHTML=o,e.current.classList.add("modal-open")}}(v,e,y),children:[(0,n.jsx)("div",{className:"leader-picture",children:e.image_id&&(0,n.jsx)("img",{src:a(e.image_url),alt:e.name})}),(0,n.jsxs)("div",{className:"leader-name",children:[e.name,(0,n.jsx)("div",{className:"leader-role",children:e.role})]})]}))))})]}),(0,n.jsx)("div",{className:"leader-modal",ref:v,children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("span",{className:"close",onClick:()=>function(e){e.current&&e.current.classList.remove("modal-open")}(v),children:"Ã—"}),(0,n.jsxs)("div",{className:"modal-body",children:[(0,n.jsx)("div",{className:"image"}),(0,n.jsx)("div",{className:"information"})]})]})})]}):(0,n.jsx)("div",{children:(0,r.__)("No groups with leaders selected","myclub-groups")}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.InspectorControls,{children:(0,n.jsx)(t.PanelBody,{title:(0,r.__)("Content settings","myclub-groups"),children:(0,n.jsx)(t.PanelRow,{children:u.length?(0,n.jsx)(t.SelectControl,{label:(0,r.__)("Group","myclub-groups"),value:e.post_id,options:u,onChange:e=>{i({post_id:e})}}):(0,n.jsx)(t.Spinner,{})})})}),(0,n.jsxs)("div",{...(0,s.useBlockProps)(),children:[e.post_id&&!c.loaded&&(0,n.jsx)(t.Spinner,{}),(c.loaded||!e.post_id)&&g]})]})}})}},s={};function t(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}};return l[e](a,a.exports,t),a.exports}t.m=l,e=[],t.O=(l,s,r,a)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,r,a]=e[d],n=!0,i=0;i<s.length;i++)(!1&a||o>=a)&&Object.keys(t.O).every((e=>t.O[e](s[i])))?s.splice(i--,1):(n=!1,a<o&&(o=a));if(n){e.splice(d--,1);var c=r();void 0!==c&&(l=c)}}return l}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,r,a]},t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={702:0,74:0};t.O.j=l=>0===e[l];var l=(l,s)=>{var r,a,[o,n,i]=s,c=0;if(o.some((l=>0!==e[l]))){for(r in n)t.o(n,r)&&(t.m[r]=n[r]);if(i)var d=i(t)}for(l&&l(s);c<o.length;c++)a=o[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},s=globalThis.webpackChunkmyclub_groups=globalThis.webpackChunkmyclub_groups||[];s.forEach(l.bind(null,0)),s.push=l.bind(null,s.push.bind(s))})();var r=t.O(void 0,[74],(()=>t(48)));r=t.O(r)})();