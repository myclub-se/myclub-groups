(()=>{"use strict";var e,t={664:()=>{const e=window.wp.blocks,t=window.React,l=window.wp.element,a=window.wp.blockEditor,r=window.wp.components,n=window.wp.i18n;function o(e){let t=new URL(e);return t.protocol=window.location.protocol,t.host=window.location.hostname,t.href}function s(e,t){setTimeout((()=>{const l=Array.from(e.current.getElementsByClassName(t)),a=Math.max(...l.map((e=>e.offsetHeight)));l.forEach((e=>{e.style.height=`${a}px`}))}))}const c=JSON.parse('{"UU":"myclub-groups/leaders"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:c}){const[m,i]=(0,l.useState)({members:[],leaders:[],loaded:!1}),[u,d]=(0,l.useState)([]),[p,h]=(0,l.useState)((0,n.__)("Leaders","myclub-groups"));let g;const{apiFetch:b}=wp,f=(0,l.useRef)(null),v=(0,l.useRef)(null),E={label:(0,n.__)("Select a group","myclub-groups"),value:""},_={role:(0,n.__)("Role","myclub-groups"),age:(0,n.__)("Age","myclub-groups"),email:(0,n.__)("E-mail","myclub-groups"),phone:(0,n.__)("Phone","myclub-groups")};return(0,l.useEffect)((()=>{i({...m,loaded:!1}),e.post_id?b({path:`/myclub/v1/groups/${e.post_id}`}).then((e=>{const t=JSON.parse(e.members);i({...t,loaded:!0})})):i({members:[],leaders:[],loaded:!0})}),[e.post_id]),(0,l.useEffect)((()=>{setTimeout((()=>{v.current&&(s(v,"leader-picture"),s(v,"leader-name"))}),100)}),[m]),(0,l.useEffect)((()=>{b({path:"/myclub/v1/options"}).then((e=>{h(e.myclub_groups_leaders_title)})),function(e,t){const{apiFetch:l}=wp;l({path:"/myclub/v1/groups"}).then((l=>{const a=l.map((e=>({label:e.title,value:e.id})));a.unshift(t),e(a)}))}(d,E)}),[]),g=m&&m.members&&m.members.length?(0,t.createElement)("div",{className:"myclub-groups-leaders-list"},(0,t.createElement)("div",{className:"myclub-groups-leaders-container"},(0,t.createElement)("h3",{className:"myclub-groups-header"},p),(0,t.createElement)("div",{ref:v,className:"leaders-list"},m.leaders.slice(0,4).map((e=>(e.name=e.name.replaceAll("u0022",'"'),e.role&&(e.role=e.role.replaceAll("u0022",'"')),(0,t.createElement)("div",{className:"leader",onClick:()=>function(e,t,l){if(e.current){const a=e.current.getElementsByClassName("image")[0],r=e.current.getElementsByClassName("information")[0];let n='<div class="name">'+t.name+"</div>";a.innerHTML='<img src="'+o(t.member_image.url)+'" alt="'+t.name+'" />',(t.role||t.phone||t.email||t.age)&&(n+="<table>",t.role&&(n+=`<tr><th>${l.role}</th><td>${t.role}</td></tr>`),t.age&&(n+=`<tr><th>${l.age}</th><td>${t.age}</td></tr>`),t.email&&(n+=`<tr><th>${l.email}</th><td><a href="mailto:${t.email}">${t.email}</a></td></tr>`),t.phone&&(n+=`<tr><th>${l.phone}</th><td><a href="tel:${t.phone}">${t.phone}</a></td></tr>`),n+="</table>"),r.innerHTML=n,e.current.classList.add("modal-open")}}(f,e,_)},(0,t.createElement)("div",{className:"leader-picture"},e.member_image&&(0,t.createElement)("img",{src:o(e.member_image.url),alt:e.name})),(0,t.createElement)("div",{className:"leader-name"},e.name,(0,t.createElement)("div",{className:"leader-role"},e.role)))))))),(0,t.createElement)("div",{className:"leader-modal",ref:f},(0,t.createElement)("div",{className:"modal-content"},(0,t.createElement)("span",{className:"close",onClick:()=>function(e){e.current&&e.current.classList.remove("modal-open")}(f)},"Ã—"),(0,t.createElement)("div",{className:"modal-body"},(0,t.createElement)("div",{className:"image"}),(0,t.createElement)("div",{className:"information"}))))):(0,t.createElement)("div",null,(0,n.__)("No groups with leaders selected","myclub-groups")),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:(0,n.__)("Content settings","myclub-groups")},(0,t.createElement)(r.PanelRow,null,u.length?(0,t.createElement)(r.SelectControl,{label:(0,n.__)("Group","myclub-groups"),value:e.post_id,options:u,onChange:e=>{c({post_id:e})}}):(0,t.createElement)(r.Spinner,null)))),(0,t.createElement)("div",{...(0,a.useBlockProps)()},e.post_id&&!m.loaded&&(0,t.createElement)(r.Spinner,null),(m.loaded||!e.post_id)&&g))}})}},l={};function a(e){var r=l[e];if(void 0!==r)return r.exports;var n=l[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,l,r,n)=>{if(!l){var o=1/0;for(i=0;i<e.length;i++){for(var[l,r,n]=e[i],s=!0,c=0;c<l.length;c++)(!1&n||o>=n)&&Object.keys(a.O).every((e=>a.O[e](l[c])))?l.splice(c--,1):(s=!1,n<o&&(o=n));if(s){e.splice(i--,1);var m=r();void 0!==m&&(t=m)}}return t}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[l,r,n]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={702:0,74:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var r,n,[o,s,c]=l,m=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var i=c(a)}for(t&&t(l);m<o.length;m++)n=o[m],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(i)},l=globalThis.webpackChunkmyclub_groups=globalThis.webpackChunkmyclub_groups||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=a.O(void 0,[74],(()=>a(664)));r=a.O(r)})();